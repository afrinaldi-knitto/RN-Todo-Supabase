# 📋 React-Native TODO List — Supabase + Zustand

Proyek ini adalah aplikasi **TODO list** sederhana berbasis **React Native (Expo)**
dengan backend **PostgreSQL Supabase** dan **manajemen state Zustand**.
Fitur utama:

*   Registrasi & login pengguna
*   CRUD todo
*   Penyimpanan token login di **AsyncStorage**
*   State global ringan dengan **Zustand**

## 🛫 A. Menyiapkan Supabase

1.  **Daftar / Masuk**
    Buka <https://supabase.com> → *Start your project* → Sign in (GitHub, Google, dsb.).

2.  **Buat Project Baru**
    *   **Organization** — pilih/buat organisasi
    *   **Project Name** — mis. `todo-demo`
    *   **Password** — (catat, dipakai untuk akses SQL)
    *   **Region** — pilih terdekat
    → Create Project.

3.  **Dapatkan Kredensial API**
    *Dashboard → Project Settings → API*
    Salin:
    *   `Project URL`
    *   `anon public key`

4.  **Buat Tabel & Function**
    Buka *SQL Editor* → *New Query* → tempel skrip di bawah → *RUN*.

    ```sql
    create table public.users (
      id          bigint generated by default as identity primary key,
      username    text unique not null,
      password    text not null,
      created_at  timestamptz default now()
    );

    create table public.todos (
      id           bigint generated by default as identity primary key,
      user_id      bigint not null references public.users(id) on delete cascade,
      description  text    not null,
      is_done      boolean not null default false,
      created_at   timestamptz default now(),
      updated_at   timestamptz default now()
    );

    create or replace function public.set_timestamp()
    returns trigger language plpgsql as $$
    begin
      NEW.updated_at := now();
      return NEW;
    end;
    $$;

    create trigger trg_set_timestamp
    before update on public.todos
    for each row execute function public.set_timestamp();

    create index if not exists todos_user_id_idx on public.todos(user_id);
    ```

## 🛠️ B. Menyiapkan File `.env`

Buat file baru bernama `.env` di root.
Salin dari `.env.example`, lalu isi:

```env
EXPO_PUBLIC_SUPABASE_URL=https://xxxxxxxx.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=eyxxxxxxxxxxxxxxxxxxxxxxxx
```

**Catatan:** Variabel berawalan `EXPO_PUBLIC_` otomatis tersedia di aplikasi Expo (RN).

## 🚀 C. Menjalankan Project React Native

### 1. Clone repo & install dependensi

```bash
git clone https://github.com/yourname/yourrepo.git
cd yourrepo
npm install
```
### 2. Buat Typescript types

Jalankan perintah berikut di terminal Anda untuk secara otomatis menghasilkan definisi tipe TypeScript berdasarkan skema database Supabase Anda. Pastikan untuk mengganti `"PROJECT_ID"` dengan ID Proyek Supabase Anda yang sebenarnya:

```bash
npx supabase gen types typescript --project-id "PROJECT_ID" > src/database.types.ts
```

### 3. Buat Typescript types

Jalankan Metro bundler (Expo)

```bash
npm run start
# Atau
npx expo start.
```

> **Tip:** Pada prompt Expo DevTools, pilih **Run on Android device/emulator**,  
> **Run on iOS simulator**, atau **Scan QR** dengan aplikasi **Expo Go** di ponsel.

### 4. Registrasi & Workflow Dasar

| Langkah                           | Aksi di Aplikasi                              |
|-----------------------------------|-----------------------------------------------|
| **Registrasi**                    | Isi *username* & *password*, tap **Register** |
| **Login**                         | Masuk dengan kredensial yang baru dibuat      |
| **Tambah Todo**                   | Tap tombol **＋**, tulis deskripsi, tap **Confirm** |
| **Tandai Selesai**                | Tap kotak ✔️ untuk men‑toggle *done* (teks dicoret) |
| **Hapus Todo**                    | Tap ikon 🗑 pada baris todo                    |
| **Logout**                        | Tap **Logout** → `userId` di AsyncStorage terhapus |

Setelah logout Anda kembali ke layar **AuthScreen**—siap untuk login ulang atau membuat akun baru.
